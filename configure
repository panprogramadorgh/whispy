#!/bin/sh

build_type=Release
build_directory="cmake-build"

while getopts ":t:" opt; do
  case "$opt" in
    t) build_type="$OPTARG";;
    \?) echo "Wrong option: -$OPTARG" >&2 || exit 2;;
    :) echo "Invalid argument for option -$OPTARG" >&2 || exit 2;;
  esac
done

if [ "$build_type" = "Debug" ]; then
  build_directory="cmake-debug-build"
fi

shift $((OPTIND - 1))

if [ $# -gt 0 ]; then  
  cmake . -B $build_directory -DCMAKE_BUILD_TYPE=$build_type -DCMAKE_TOOLCHAIN_FILE=./cmake/toolchains/$1.cmake
else
  cmake . -B $build_directory -DCMAKE_BUILD_TYPE=$build_type
fi
